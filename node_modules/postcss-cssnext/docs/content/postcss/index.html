<h2 id="why-postcss-cssnext-what-is-the-difference-with-cssnext">Why <strong>postcss-cssnext</strong>? What is the difference with <strong>cssnext</strong>?</h2>

<h3 id="short-answer-postcss">Short answer: PostCSS</h3>

<p>If you’re using <a href="https://github.com/postcss/postcss">PostCSS</a>
in your build process, and you were using <code class="language-plaintext highlighter-rouge">cssnext</code>,
you can quickly switch to only <code class="language-plaintext highlighter-rouge">postcss-cssnext</code>
(check the <a href="#migration">Migration</a> section here below).</p>

<h3 id="wait-what-is-postcss">Wait? What is PostCSS?</h3>

<p>At first, before PostCSS became
popular, cssnext was designed to be a complete tool. Thus, cssnext included some options that don’t really belong in a PostCSS
plugin focused on the future of CSS
(e.g., <code class="language-plaintext highlighter-rouge">import</code>, <code class="language-plaintext highlighter-rouge">url</code>, <code class="language-plaintext highlighter-rouge">compress</code>, <code class="language-plaintext highlighter-rouge">plugins</code>…) .</p>

<p>These days, most people use <a href="https://github.com/postcss/postcss">PostCSS</a>
directly (so they can easily adjust and choose their CSS transformations).
So we decided to make the integration of cssnext simpler by providing a
simple (real) plugin.</p>

<p>Also, having to maintain several cssnext and PostCSS runners that do almost
the same thing is not optimal.</p>

<h3 id="migration">Migration</h3>

<p>If you were using cssnext with some options, here is what you need to know:</p>

<h4 id="options">Options</h4>

<h5 id="options-import-url-compress-messages">Options <code class="language-plaintext highlighter-rouge">import</code>, <code class="language-plaintext highlighter-rouge">url</code>, <code class="language-plaintext highlighter-rouge">compress</code>, <code class="language-plaintext highlighter-rouge">messages</code></h5>

<ul>
  <li><code class="language-plaintext highlighter-rouge">import</code> options is just
<a href="https://github.com/postcss/postcss-import"><code class="language-plaintext highlighter-rouge">postcss-import</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">url</code> option is just
<a href="https://github.com/postcss/postcss-url"><code class="language-plaintext highlighter-rouge">postcss-url</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">compress</code> option is just
<a href="https://github.com/ben-eb/cssnano"><code class="language-plaintext highlighter-rouge">cssnano</code></a></li>
  <li><code class="language-plaintext highlighter-rouge">messages</code>: was a combination of
<a href="https://github.com/postcss/postcss-reporter"><code class="language-plaintext highlighter-rouge">postcss-reporter</code></a>
and
<a href="https://github.com/postcss/postcss-browser-reporter"><code class="language-plaintext highlighter-rouge">postcss-browser-reporter</code></a>.
Just pick up the one you want (or both).</li>
</ul>

<h5 id="option-plugins">Option <code class="language-plaintext highlighter-rouge">plugins</code></h5>

<p>Just add the plugins directly in your PostCSS list.</p>

<h5 id="options-sourcemap-map-to-from">Options <code class="language-plaintext highlighter-rouge">sourcemap</code>, <code class="language-plaintext highlighter-rouge">map</code>, <code class="language-plaintext highlighter-rouge">to</code>, <code class="language-plaintext highlighter-rouge">from</code></h5>

<p>These options were just proxy to <a href="https://github.com/postcss/postcss/blob/master/docs/source-maps.md">PostCSS source map options</a>.</p>

<h4 id="examples">Examples</h4>

<p>If you were using cssnext with default options, you might just need this:</p>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>npm uninstall cssnext <span class="o">[</span><span class="nt">--save</span><span class="o">[</span><span class="nt">-dev</span><span class="o">]]</span>
<span class="gp">$</span><span class="w"> </span>npm <span class="nb">install </span>postcss postcss-import postcss-url postcss-cssnext postcss-browser-reporter postcss-reporter <span class="o">[</span><span class="nt">--save</span><span class="o">[</span><span class="nt">-dev</span><span class="o">]]</span>
</code></pre></div></div>

<p>With the previous lines you might think that you are going backward by having a
more complex boilerplate. But if you look carefully, you will notice that you
might not be interested in some options.</p>

<p>Now that you have the appropriate plugins, here are some examples with some runners
and previous default cssnext behavior.</p>

<h5 id="postcss-cli"><a href="https://www.npmjs.com/package/postcss-cli">postcss-cli</a></h5>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>npm <span class="nb">install </span>postcss-cli <span class="nt">--save-dev</span>
</code></pre></div></div>

<p>Here is an example of the JS config you might use with something like
<code class="language-plaintext highlighter-rouge">$ postcss input.css -o output.css</code>.</p>

<p><strong>postcss.config.js</strong></p>
<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">plugins</span><span class="p">:</span> <span class="p">[</span>
    <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">postcss-import</span><span class="dl">'</span><span class="p">),</span>
    <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">postcss-url</span><span class="dl">'</span><span class="p">),</span>
    <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">postcss-cssnext</span><span class="dl">'</span><span class="p">),</span>
    <span class="c1">// add your "plugins" here</span>
    <span class="c1">// ...</span>
    <span class="c1">// and if you want to compress</span>
    <span class="c1">// require('cssnano'),</span>
    <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">postcss-browser-reporter</span><span class="dl">'</span><span class="p">)</span>
  <span class="p">]</span>
<span class="p">}</span>
</code></pre></div></div>

<h5 id="grunt-postcss"><a href="https://www.npmjs.com/package/grunt-postcss">grunt-postcss</a></h5>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>npm uninstall grunt-cssnext <span class="nt">--save-dev</span>
<span class="gp">$</span><span class="w"> </span>npm <span class="nb">install </span>grunt-postcss <span class="nt">--save-dev</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">grunt</span><span class="p">.</span><span class="nx">initConfig</span><span class="p">({</span>
  <span class="na">postcss</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">options</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">processors</span><span class="p">:</span> <span class="p">[</span>
        <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-import</span><span class="dl">"</span><span class="p">)(),</span>
        <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-url</span><span class="dl">"</span><span class="p">)(),</span>
        <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-cssnext</span><span class="dl">"</span><span class="p">)(),</span>
        <span class="c1">// add your "plugins" here</span>
        <span class="c1">// ...</span>
        <span class="c1">// and if you want to compress</span>
        <span class="c1">// Disable autoprefixer, because it's already included in cssnext</span>
        <span class="c1">// require("cssnano")({ autoprefixer: false }),</span>
        <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-browser-reporter</span><span class="dl">"</span><span class="p">)(),</span>
        <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-reporter</span><span class="dl">"</span><span class="p">)(),</span>
      <span class="p">]</span>
    <span class="p">},</span>
    <span class="na">dist</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">src</span><span class="p">:</span> <span class="dl">'</span><span class="s1">css/*.css</span><span class="dl">'</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div></div>

<h5 id="gulp-postcss"><a href="https://www.npmjs.com/package/gulp-postcss">gulp-postcss</a></h5>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>npm uninstall gulp-cssnext <span class="nt">--save-dev</span>
<span class="gp">$</span><span class="w"> </span>npm <span class="nb">install </span>gulp-postcss <span class="nt">--save-dev</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">gulp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gulp</span><span class="dl">'</span><span class="p">)</span>
<span class="kd">var</span> <span class="nx">postcss</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">gulp-postcss</span><span class="dl">'</span><span class="p">)</span>

<span class="nx">gulp</span><span class="p">.</span><span class="nx">task</span><span class="p">(</span><span class="dl">'</span><span class="s1">css</span><span class="dl">'</span><span class="p">,</span> <span class="kd">function</span> <span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="p">(</span>
    <span class="nx">gulp</span><span class="p">.</span><span class="nx">src</span><span class="p">(</span><span class="dl">'</span><span class="s1">./src/*.css</span><span class="dl">'</span><span class="p">)</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">postcss</span><span class="p">([</span>
      <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-import</span><span class="dl">"</span><span class="p">)(),</span>
      <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-url</span><span class="dl">"</span><span class="p">)(),</span>
      <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-cssnext</span><span class="dl">"</span><span class="p">)(),</span>
      <span class="c1">// add your "plugins" here</span>
      <span class="c1">// ...</span>
      <span class="c1">// and if you want to compress</span>
      <span class="c1">// Disable autoprefixer, because it's already included in cssnext</span>
      <span class="c1">// require("cssnano")({ autoprefixer: false }),</span>
      <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-browser-reporter</span><span class="dl">"</span><span class="p">)(),</span>
      <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-reporter</span><span class="dl">"</span><span class="p">)(),</span>
    <span class="p">]))</span>
    <span class="p">.</span><span class="nx">pipe</span><span class="p">(</span><span class="nx">gulp</span><span class="p">.</span><span class="nx">dest</span><span class="p">(</span><span class="dl">'</span><span class="s1">./dest</span><span class="dl">'</span><span class="p">))</span>
  <span class="p">)</span>
<span class="p">})</span>
</code></pre></div></div>

<h5 id="postcss-loader"><a href="https://www.npmjs.com/package/postcss-loader">postcss-loader</a></h5>

<div class="language-console highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="gp">$</span><span class="w"> </span>npm uninstall cssnext-loader <span class="nt">--save-dev</span>
<span class="gp">$</span><span class="w"> </span>npm <span class="nb">install </span>postcss-loader <span class="nt">--save-dev</span>
</code></pre></div></div>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">module</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">loaders</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">{</span>
          <span class="na">test</span><span class="p">:</span>   <span class="sr">/</span><span class="se">\.</span><span class="sr">css$/</span><span class="p">,</span>
          <span class="na">loader</span><span class="p">:</span> <span class="dl">"</span><span class="s2">style-loader!css-loader!postcss-loader</span><span class="dl">"</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="na">postcss</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">webpack</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="p">[</span>
      <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-import</span><span class="dl">"</span><span class="p">)({</span> <span class="na">addDependencyTo</span><span class="p">:</span> <span class="nx">webpack</span> <span class="p">}),</span>
      <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-url</span><span class="dl">"</span><span class="p">)(),</span>
      <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-cssnext</span><span class="dl">"</span><span class="p">)(),</span>
      <span class="c1">// add your "plugins" here</span>
      <span class="c1">// ...</span>
      <span class="c1">// and if you want to compress,</span>
      <span class="c1">// just use css-loader option that already use cssnano under the hood</span>
      <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-browser-reporter</span><span class="dl">"</span><span class="p">)(),</span>
      <span class="nx">require</span><span class="p">(</span><span class="dl">"</span><span class="s2">postcss-reporter</span><span class="dl">"</span><span class="p">)(),</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p><strong>With these examples, you’ll have future facing CSS.
Feel free to adjust the configuration with the appropriate
<a href="/setup/#usage">PostCSS runner</a>.</strong></p>
